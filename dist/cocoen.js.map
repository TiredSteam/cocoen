{
  "version": 3,
  "sources": ["../src/index.ts", "../src/config.ts", "../src/utils/debounce.ts", "../src/components/cocoen.ts", "../src/create.ts", "../src/parse.ts"],
  "sourcesContent": ["import { componentName } from './config';\nimport { Cocoen } from './components/cocoen';\nimport { create } from './create';\nimport { parse } from './parse';\n\n// Define our custom Cocoen web component\ncustomElements.define(componentName, Cocoen);\n\nexport { create, parse };\n", "export const name = 'cocoen';\nexport const componentName = `${name}-component`;\n", "/* eslint-disable eslint-comments/disable-enable-pair */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-unsafe-return */\n/* eslint-disable eslint-comments/no-duplicate-disable */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unused-expressions */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport const debounce = <T extends (...args: any[]) => any>(\n  callback: T,\n  waitFor: number,\n) => {\n  let timeout: ReturnType<typeof setTimeout>;\n  return (...args: Parameters<T>): ReturnType<T> => {\n    let result: any;\n    timeout && clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      result = callback(...args);\n    }, waitFor);\n    return result;\n  };\n};\n", "import { debounce } from '../utils/debounce';\n\nconst css = `\n  #container {\n    box-sizing: border-box;\n    cursor: pointer;\n    line-height: 0;\n    margin: 0 auto;\n    overflow: hidden;\n    padding: 0;\n    position: relative;\n    user-select: none;\n  }\n\n\n  #container *,\n  #container *:after,\n  #container *:before {\n    box-sizing: inherit;\n  }\n\n  #before {\n    height: 100%;\n    left: 0;\n    overflow: hidden;\n    position: absolute;\n    top: 0;\n    width: 50%;\n  }\n\n  #drag {\n    background: #fff;\n    bottom: 0;\n    cursor: ew-resize;\n    left: 50%;\n    margin-left: -1px;\n    position: absolute;\n    top: 0;\n    width: 2px;\n  }\n\n  #drag:before {\n    border: 3px solid #fff;\n    content: '';\n    height: 30px;\n    left: 50%;\n    margin-left: -7px;\n    margin-top: -18px;\n    position: absolute;\n    top: 50%;\n    width: 14px;\n  }\n\n  ::slotted(img) {\n    object-fit: contain;\n    max-height: 100%;\n  }\n\n  ::slotted(img[slot=before]) {\n    max-width: none;\n  }\n\n  ::slotted(img[slot=after]) {\n    display: block;\n    width: 100%;\n    max-width: 100%;\n  }\n`;\n\ntype CustomEventPayload = {\n  detail: {\n    elementWidth: number;\n    openRatio: string;\n    rendered: boolean;\n  };\n};\n\nexport class Cocoen extends HTMLElement {\n  private container: HTMLElement | null;\n\n  private drag: HTMLElement | null;\n\n  private shadowDOM: ShadowRoot;\n\n  private onDragStartHandler: (event: MouseEvent | TouchEvent) => void;\n\n  private onDragEndHandler: (event: MouseEvent | TouchEvent) => void;\n\n  private onDragHandler: (event: MouseEvent | TouchEvent) => void;\n\n  private onClickHandler: (event: MouseEvent) => void;\n\n  private debouncedUpdateDimensions: () => void;\n\n  private xValue = 0;\n\n  private elementWidthValue = 0;\n\n  private dragElementWidthValue = 0;\n\n  private openRatioValue = '50%';\n\n  private isDraggingValue = false;\n\n  private rendered = false;\n\n  constructor() {\n    super();\n\n    this.container = null;\n    this.drag = null;\n    this.shadowDOM = this.attachShadow({ mode: 'closed' });\n\n    this.onDragStartHandler = (event: MouseEvent | TouchEvent) =>\n      this.onDragStart(event);\n\n    this.onDragEndHandler = () => this.onDragEnd();\n    this.onDragHandler = (event: MouseEvent | TouchEvent) => this.onDrag(event);\n    this.onClickHandler = (event: MouseEvent) => this.onClick(event);\n\n    this.debouncedUpdateDimensions = debounce(() => {\n      this.updateDimensions();\n    }, 250);\n  }\n\n  get x(): number {\n    return this.xValue;\n  }\n\n  set x(value: number) {\n    this.xValue = value;\n\n    window.requestAnimationFrame(() => {\n      this.openRatio = this.calculateOpenRatio(this.xValue);\n    });\n  }\n\n  get elementWidth(): number {\n    return this.elementWidthValue;\n  }\n\n  set elementWidth(value: number) {\n    this.elementWidthValue = value;\n  }\n\n  get dragElementWidth(): number {\n    return this.dragElementWidthValue;\n  }\n\n  set dragElementWidth(value: number) {\n    this.dragElementWidthValue = value;\n  }\n\n  get isDragging(): boolean {\n    return this.isDraggingValue;\n  }\n\n  set isDragging(value: boolean) {\n    this.isDraggingValue = value;\n  }\n\n  get openRatio(): string {\n    return this.openRatioValue;\n  }\n\n  set openRatio(value: string) {\n    this.openRatioValue = value;\n\n    this.updateStyles();\n  }\n\n  connectedCallback(): void {\n    if (this.rendered) {\n      return;\n    }\n\n    this.render();\n    this.rendered = true;\n\n    document.dispatchEvent(\n      new CustomEvent('cocoen:rendered', this.customEventPayload()),\n    );\n\n    this.container = this.shadowDOM.querySelector('#container');\n    this.drag = this.shadowDOM.querySelector('#drag');\n\n    this.updateDimensions();\n\n    this.container?.addEventListener('mousedown', this.onDragStartHandler);\n    this.container?.addEventListener('touchstart', this.onDragStartHandler);\n    this.container?.addEventListener('mousemove', this.onDragHandler);\n    this.container?.addEventListener('touchmove', this.onDragHandler);\n    this.container?.addEventListener('click', this.onClickHandler);\n\n    window.addEventListener('resize', this.debouncedUpdateDimensions);\n    window.addEventListener('mouseup', this.onDragEndHandler);\n    window.addEventListener('touchend', this.onDragEndHandler);\n  }\n\n  disconnectedCallback(): void {\n    this.container?.removeEventListener('mousedown', this.onDragStartHandler);\n    this.container?.removeEventListener('touchstart', this.onDragStartHandler);\n    this.container?.removeEventListener('mousemove', this.onDragHandler);\n    this.container?.addEventListener('touchmove', this.onDragHandler);\n    this.container?.removeEventListener('click', this.onClickHandler);\n\n    window.removeEventListener('resize', this.debouncedUpdateDimensions);\n    window.removeEventListener('mouseup', this.onDragEndHandler);\n    window.removeEventListener('touchend', this.onDragEndHandler);\n  }\n\n  render(): void {\n    this.shadowDOM.innerHTML = `\n      <style>${css}</style>\n      <div id=\"container\">\n        <div id=\"before\">\n          <slot name=\"before\"></slot>\n        </div>\n        <slot name=\"after\"></slot>\n        <div id=\"drag\"></div>\n      </div>\n    `;\n  }\n\n  updateDimensions(): void {\n    if (this.container && this.drag) {\n      this.elementWidth = Number.parseInt(\n        window.getComputedStyle(this.container).width,\n        10,\n      );\n      this.dragElementWidth = Number.parseInt(\n        window.getComputedStyle(this.drag).width,\n        10,\n      );\n    }\n\n    document.dispatchEvent(\n      new CustomEvent('cocoen:resized', this.customEventPayload()),\n    );\n  }\n\n  updateStyles(): void {\n    const before = this.container?.querySelector('#before') as HTMLElement;\n    const drag = this.container?.querySelector('#drag') as HTMLElement;\n\n    before.style.width = this.openRatio;\n    drag.style.left = this.openRatio;\n\n    document.dispatchEvent(\n      new CustomEvent('cocoen:updated', this.customEventPayload()),\n    );\n  }\n\n  onDragStart(event: MouseEvent | TouchEvent): void {\n    event.preventDefault();\n\n    this.isDragging = true;\n  }\n\n  onDrag(event: MouseEvent | TouchEvent): void {\n    event.preventDefault();\n\n    if (!this.isDragging) {\n      return;\n    }\n\n    this.x = this.calculateXfromEvent(event);\n  }\n\n  onDragEnd(): void {\n    this.isDragging = false;\n  }\n\n  onClick(event: MouseEvent): void {\n    event.preventDefault();\n\n    this.x = this.calculateXfromEvent(event);\n  }\n\n  calculateXfromEvent(event: MouseEvent | TouchEvent): number {\n    let clientX = 0;\n    if (event instanceof MouseEvent) {\n      clientX = event.clientX;\n    } else if (event instanceof TouchEvent) {\n      clientX = event.touches[0].clientX;\n    }\n\n    const offsetLeft = this.container\n      ? this.container.getBoundingClientRect().left\n      : 0;\n    return clientX - offsetLeft;\n  }\n\n  calculateOpenRatio(activeX: number): string {\n    let value = activeX;\n    if (activeX < 0) {\n      value = this.dragElementWidth;\n    } else if (activeX >= this.elementWidth) {\n      value = this.elementWidth - this.dragElementWidth;\n    }\n\n    let ratio = value + this.dragElementWidth / 2;\n    ratio /= this.elementWidth;\n    return `${ratio * 100}%`;\n  }\n\n  customEventPayload(): CustomEventPayload {\n    return {\n      detail: {\n        elementWidth: this.elementWidth,\n        openRatio: this.openRatio,\n        rendered: this.rendered,\n      },\n    };\n  }\n}\n", "import { componentName } from './config';\nimport { Cocoen } from './components/cocoen';\n\nexport const create = (element: Element): Cocoen => {\n  const component = document.createElement(componentName) as Cocoen;\n  const before = element.querySelectorAll('img')[0];\n  const after = element.querySelectorAll('img')[1];\n\n  if (!before || !after) {\n    throw new Error('Cocoen needs two images');\n  }\n\n  before.setAttribute('slot', 'before');\n  after.setAttribute('slot', 'after');\n  component.append(before.cloneNode(true));\n  component.append(after.cloneNode(true));\n  element.replaceWith(component);\n\n  return component;\n};\n", "import { name } from './config';\nimport { create } from './create';\n\nexport const parse = (context: HTMLElement): void => {\n  const elements = [...context.querySelectorAll(`.${name}`)];\n  elements.map((element) => create(element));\n};\n"],
  "mappings": "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",
  "names": []
}
